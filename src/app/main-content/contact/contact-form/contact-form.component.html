<section *ngIf="jsonContent">
  <form (ngSubmit)="onSubmit(contactForm)" #contactForm="ngForm">
    @for(field of fields; track field.id) {
    <div class="field-holder">
      <ng-container *ngIf="field.type !== 'textarea'; else textareaField">
        <input
          placeholder=" "
          [type]="field.type"
          id="{{ field.id }}"
          required
          [(ngModel)]="contactData[field.id]"
          name="{{ field.id }}"
          [pattern]="
            field.type === 'email'
              ? '[a-zA-Z0-9._%+/-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}'
              : ''
          "
          #inputField="ngModel"
        />
        <label for="{{ field.id }}">{{ field.placeholder }}</label>
        @if (!inputField.valid && inputField.touched) {
        <div class="validation-message">
          {{ getErrorMessage(field.id) }}
        </div>
        }
      </ng-container>
      <ng-template #textareaField>
        <textarea
          placeholder=" "
          id="{{ field.id }}"
          rows="8"
          required
          [(ngModel)]="contactData[field.id]"
          name="{{ field.id }}"
          #message="ngModel"
          minlength="4"
        ></textarea>
        @if (!message.valid && message.touched) {
        <div class="validation-message">{{ jsonContent.contact.enter_message }}</div>
        }
        <label for="{{ field.id }}">{{ field.placeholder }}</label>
      </ng-template>
    </div>
    }
    <input type="submit" value="{{ jsonContent.contact.button }}" />
  </form>
</section>
